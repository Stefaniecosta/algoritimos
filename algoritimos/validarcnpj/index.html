<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

  <center> 
   <br>
   <br>
   <br>
   <br>
   <br>
  <input type="text" placeholder="CNPJ" required id="idCnpj" autocomplete="off" 
  onkeypress="mascaraCnpj()">
    
</center>
</body>
</html>

<script>


function mascaraCnpj() {
  var empresa = document.getElementById('idEmpresa');
  var cnpj = document.getElementById('idCnpj');



  if (cnpj.value.length == 2 || cnpj.value.length == 6) {
    cnpj.value += ".";
    
  } else if (cnpj.value.length == 10) {
    cnpj.value += "/";

  } else if (cnpj.value.length == 15) {
    cnpj.value += "-";
   
  } else if (cnpj.value == "00.000.000/0000-00" || 
     cnpj.value == "11.111.111/1111-11" || 
     cnpj.value == "22.222.222/2222-22" || 
     cnpj.value == "33.333.333/3333-33" || 
     cnpj.value == "44.444.444/4444-44" || 
     cnpj.value == "55.555.555/5555-55" || 
     cnpj.value == "66.666.666/6666-66" || 
     cnpj.value == "77.777.777/7777-77" || 
     cnpj.value == "88.888.888/8888-88" || 
     cnpj .value== "99.999.999/9999-99") {
       alert("valor invalido")
      return false;  // elimina cnpjs invalidos conhecidos
     } 
        
        var v1 = 0;
        var v2 = 0;
        var aux = false;
        
        for (var i = 1; cnpj.length > i; i++) { 
            if (cnpj[i - 1] != cnpj[i]) {  
                aux = true;   
            } 
        } 
        
        if (aux == false) {  
            return false; 
        }
        
        for (var i = 0, p1 = 5, p2 = 13; (cnpj.length - 2) > i; i++, p1--, p2--) {
            if (p1 >= 2) {  
                v1 += cnpj[i] * p1;  
            } else {  
                v1 += cnpj[i] * p2;  
            } 
        } 
        
        v1 = (v1 % 11);
        
        if (v1 < 2) { 
            v1 = 0; 
        } else { 
            v1 = (11 - v1); 
        } 
        
        if (v1 != cnpj[12]) {  
            return false; 
        } 
        
        for (var i = 0, p1 = 6, p2 = 14; (cnpj.length - 1) > i; i++, p1--, p2--) { 
            if (p1 >= 2) {  
                v2 += cnpj[i] * p1;  
            } else {   
                v2 += cnpj[i] * p2; 
            } 
        }
        
        v2 = (v2 % 11); 
        
        if (v2 < 2) {  
            v2 = 0;
        } else { 
            v2 = (11 - v2); 
        } 
        
        if (v2 != cnpj[13]) {   
            return false; 
        } else {  
            return true; 
        }
     else {
        return false;
    }
 



}



      function validarCNPJ(cnpj) {

        
      var cnpj = document.getElementById("cnpj")

 
 cnpj = cnpj.replace(/[^\d]+/g,'');

 if(cnpj == '') return false;
  
 if (cnpj.length != 14)
     return false;

 // Elimina CNPJs invalidos conhecidos
 if (cnpj == "00000000000000" || 
     cnpj == "11111111111111" || 
     cnpj == "22222222222222" || 
     cnpj == "33333333333333" || 
     cnpj == "44444444444444" || 
     cnpj == "55555555555555" || 
     cnpj == "66666666666666" || 
     cnpj == "77777777777777" || 
     cnpj == "88888888888888" || 
     cnpj == "99999999999999")
     return false;
      
 // Valida DVs
 tamanho = cnpj.length - 2
 numeros = cnpj.substring(0,tamanho);
 digitos = cnpj.substring(tamanho);
 soma = 0;
 pos = tamanho - 7;
 for (i = tamanho; i >= 1; i--) {
   soma += numeros.charAt(tamanho - i) * pos--;
   if (pos < 2)
         pos = 9;
 }
 resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
 if (resultado != digitos.charAt(0))
     return false;
      


 tamanho = tamanho + 1;
 numeros = cnpj.substring(0,tamanho);
 soma = 0;
 pos = tamanho - 7;
 for (i = tamanho; i >= 1; i--) {
   soma += numeros.charAt(tamanho - i) * pos--;
   if (pos < 2)
         pos = 9;
 }
 resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
 if (resultado != digitos.charAt(1))
       return false;
        
 return true;
}

</script>